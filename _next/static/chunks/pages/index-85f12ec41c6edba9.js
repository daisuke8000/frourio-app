(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{9088:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return k}});var r=e(29),o=e(7794),c=e.n(o),a=e(9008),u=e(7294),s=e(3301),i=e.n(s),l=e(214),f=e.n(l),p=e(8416),d=e.n(p),h=e(3928),x=function(n){var t=n.baseURL,e=n.fetch,r=(void 0===t?"":t).replace(/\/$/,""),o="/article",c="/tasks",a="/token",u="/user",s="GET",i="POST",l="DELETE",f="PATCH";return{article:{_articleId:function(n){var t="".concat(o,"/").concat(n);return{get:function(n){return e(r,t,s,n).json()},$get:function(n){return e(r,t,s,n).json().then((function(n){return n.body}))},$path:function(){return"".concat(r).concat(t)}}},get:function(n){return e(r,o,s,n).json()},$get:function(n){return e(r,o,s,n).json().then((function(n){return n.body}))},$path:function(n){return"".concat(r).concat(o).concat(n&&n.query?"?".concat((0,h.dataToURLString)(n.query)):"")}},tasks:{_taskId:function(n){var t="".concat(c,"/").concat(n);return{patch:function(n){return e(r,t,f,n).send()},$patch:function(n){return e(r,t,f,n).send().then((function(n){return n.body}))},delete:function(n){return e(r,t,l,n).send()},$delete:function(n){return e(r,t,l,n).send().then((function(n){return n.body}))},$path:function(){return"".concat(r).concat(t)}}},get:function(n){return e(r,c,s,n).json()},$get:function(n){return e(r,c,s,n).json().then((function(n){return n.body}))},post:function(n){return e(r,c,i,n).json()},$post:function(n){return e(r,c,i,n).json().then((function(n){return n.body}))},$path:function(n){return"".concat(r).concat(c).concat(n&&n.query?"?".concat((0,h.dataToURLString)(n.query)):"")}},token:{post:function(n){return e(r,a,i,n).json()},$post:function(n){return e(r,a,i,n).json().then((function(n){return n.body}))},$path:function(){return"".concat(r).concat(a)}},user:{get:function(n){return e(r,u,s,n).json()},$get:function(n){return e(r,u,s,n).json().then((function(n){return n.body}))},post:function(n){return e(r,u,i,n,"FormData").json()},$post:function(n){return e(r,u,i,n,"FormData").json().then((function(n){return n.body}))},$path:function(){return"".concat(r).concat(u)}},get:function(n){return e(r,"",s,n).text()},$get:function(n){return e(r,"",s,n).text().then((function(n){return n.body}))},$path:function(){return"".concat(r)}}}(d()()),_=e(9474),j=e.n(_),m=e(5893),b=function(){var n=(0,u.useState)(!1),t=n[0],e=n[1],o=(0,u.useState)(""),a=o[0],s=o[1],i=(0,u.useState)({}),l=i[0],f=i[1],p=(0,u.useCallback)(function(){var n=(0,r.Z)(c().mark((function n(t){var e;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==(e=t.target.files)&&void 0!==e&&e.length){n.next=2;break}return n.abrupt("return");case 2:return n.t0=f,n.next=5,x.user.$post({headers:{authorization:a},body:{icon:t.target.files[0]}});case 5:n.t1=n.sent,(0,n.t0)(n.t1);case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),[a]),d=(0,u.useCallback)((0,r.Z)(c().mark((function n(){var t,r,o;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=prompt("Enter the user id (See server/.env)"),r=prompt("Enter the user pass (See server/.env)"),t&&r){n.next=4;break}return n.abrupt("return",alert("Login failed"));case 4:return o="",n.prev=5,n.t0="Bearer ",n.next=9,x.token.$post({body:{id:t,pass:r}});case 9:n.t1=n.sent.token,o=n.t0.concat.call(n.t0,n.t1),s(o),n.next=17;break;case 14:return n.prev=14,n.t2=n.catch(5),n.abrupt("return",alert("Login failed"));case 17:return n.t3=f,n.next=20,x.user.$get({headers:{authorization:o}});case 20:n.t4=n.sent,(0,n.t3)(n.t4),e(!0);case 23:case"end":return n.stop()}}),n,null,[[5,14]])}))),[]),h=(0,u.useCallback)((function(){s(""),e(!1)}),[]);return(0,m.jsx)("div",{className:j().userBanner,children:t?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("img",{src:l.icon,className:j().userIcon}),(0,m.jsx)("span",{children:l.name}),(0,m.jsx)("input",{type:"file",accept:"image/*",onChange:p}),(0,m.jsx)("button",{onClick:h,children:"LOGOUT"})]}):(0,m.jsx)("button",{onClick:d,children:"LOGIN"})})},k=function(){var n=i()(x.tasks),t=n.data,e=n.error,o=n.mutate,s=(0,u.useState)(""),l=s[0],p=s[1],d=(0,u.useCallback)((function(n){return p(n.target.value)}),[]),h=(0,u.useCallback)(function(){var n=(0,r.Z)(c().mark((function n(t){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),l){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,x.tasks.post({body:{label:l}});case 5:p(""),o();case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),[l]),_=(0,u.useCallback)(function(){var n=(0,r.Z)(c().mark((function n(t){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.tasks._taskId(t.id).patch({body:{done:!t.done}});case 2:o();case 3:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),[]),j=(0,u.useCallback)(function(){var n=(0,r.Z)(c().mark((function n(t){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.tasks._taskId(t.id).delete();case 2:o();case 3:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),[]);return e?(0,m.jsx)("div",{children:"failed to load"}):t?(0,m.jsxs)("div",{className:f().container,children:[(0,m.jsxs)(a.default,{children:[(0,m.jsx)("title",{children:"frourio-todo-app"}),(0,m.jsx)("link",{rel:"icon",href:"/favicon.png"})]}),(0,m.jsxs)("main",{className:f().main,children:[(0,m.jsx)(b,{}),(0,m.jsxs)("h1",{className:f().title,children:["Welcome to ",(0,m.jsx)("a",{href:"https://nextjs.org",children:"Next.js!"})]}),(0,m.jsx)("p",{className:f().description,children:"frourio-todo-app"}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("form",{style:{textAlign:"center"},onSubmit:h,children:[(0,m.jsx)("input",{value:l,type:"text",onChange:d}),(0,m.jsx)("input",{type:"submit",value:"ADD"})]}),(0,m.jsx)("ul",{className:f().tasks,children:t.map((function(n){return(0,m.jsxs)("li",{children:[(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"checkbox",checked:n.done,onChange:function(){return _(n)}}),(0,m.jsx)("span",{children:n.label})]}),(0,m.jsx)("input",{type:"button",value:"DELETE",style:{float:"right"},onClick:function(){return j(n)}})]},n.id)}))})]})]}),(0,m.jsx)("footer",{className:f().footer,children:(0,m.jsxs)("a",{href:"https://vercel.com?utm_source=create-next-app&utm_medium=default-template&utm_campaign=create-next-app",target:"_blank",rel:"noopener noreferrer",children:["Powered by"," ",(0,m.jsx)("img",{src:"/vercel.svg",alt:"Vercel Logo",className:f().logo})]})})]}):(0,m.jsx)("div",{children:"loading..."})}},5301:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(9088)}])},214:function(n){n.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",footer:"Home_footer____T7K",title:"Home_title__T09hD",description:"Home_description__41Owk",logo:"Home_logo__27_tb",tasks:"Home_tasks__KFfHM"}},9474:function(n){n.exports={userBanner:"UserBanner_userBanner__hB_2K",userIcon:"UserBanner_userIcon__d6JKR"}}},function(n){n.O(0,[652,774,888,179],(function(){return t=5301,n(n.s=t);var t}));var t=n.O();_N_E=t}]);